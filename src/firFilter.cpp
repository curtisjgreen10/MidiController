/*
 * firFilter.cpp
 *
 *  Created on: Apr 13, 2021
 *      Author: cjgree13
 */

#include "firFilter.h"

static float FIR_IMPULSE_RESPONSE[FIR_FILTER_LENGTH] =
{
#if 1
		0.002178025562165529071395608795569387439,
				 0.000181267914343754909340875047796259878,
				 0.000188670229887645860521183660551969297,
				 0.000196179265884532293357303545100478459,
				 0.000203788064965256421768452499421186985,
				 0.000211497497852252856406773950936894835,
				 0.000219298746737803034942415614239052957,
				 0.000227190513797247882693888798577575017,
				 0.000235164425516434127299073009176311189,
				 0.000243219500211722090094942916316256287,
				 0.000251346462112940309541198047327270615,
				 0.00025954439574107972471886385257278107 ,
				 0.000267805138918506989084700187220278167,
				 0.000276128604086732238730855781838613439,
				 0.00028450335392873877084565781281355612 ,
				 0.000292927947423746669851352120161891435,
				 0.000301391735502388677121060611696634624,
				 0.000309892542395132748137692724199609984,
				 0.000318418379187888661747962704140491041,
				 0.000326969708158960433320300298376537285,
				 0.000335534520093316033020891531180041056,
				 0.00034411087436497030285498244239761334 ,
				 0.000352689109979818869039513984375844302,
				 0.000361263359766027367016988369741170573,
				 0.000369821380004550879106589578171337962,
				 0.000378360631585671189271863346093027758,
				 0.000386867725025322271165117982150150056,
				 0.000395340981010779818610040292625740221,
				 0.000403768242907358439978265929326539663,
				 0.0004121431843911914577952004812289033  ,
				 0.00042045554095127381840496516574035013 ,
				 0.000428696359739588273365940018777564546,
				 0.000436856185375711640779539113310647735,
				 0.000444927796624310588867456939254907411,
				 0.000452899761577707136127324272223404478,
				 0.000460765615114857782479845793588424385,
				 0.000468512758387105532169314425772199684,
				 0.000476133194680679729202804617571587187,
				 0.000483614777833969321143431363552167568,
				 0.000490951485022206204726635814239443789,
				 0.000498130798004316438336303018985518065,
				 0.000505145997579321804314689270398730514,
				 0.000511982973466100390984301338193063202,
				 0.00051863288030380553551845768112116275 ,
				 0.000525082019695964109795571772565381252,
				 0.000531326053397614388867919998915567703,
				 0.000537347936765063716353652001345153622,
				 0.000543146322006760008324621757935801725,
				 0.00054869564515861216601189109809411093 ,
				 0.000553997796314926300130510039565479019,
				 0.000559032201509470022884884521374715405,
				 0.000563795048777442444655483289039921146,
				 0.000568273688846419140416332815846089943,
				 0.000572454583499086631752372777981463514,
				 0.000576321494226988409112499844866306375,
				 0.000579872377582601517854998807166566621,
				 0.000583090381835795162727975604610719529,
				 0.000585968059126099711717006179867439641,
				 0.000588489857048687860924252035488279944,
				 0.000590646204122212523275614604045813394,
				 0.000592423993249702011965052150799238007,
				 0.000593818076304912338680974670523937675,
				 0.00059481168137116499639027722423634259 ,
				 0.000595392056026647765835935199874029422,
				 0.000595548662394163172070782330536076188,
				 0.00059527682395562036415936901789791591 ,
				 0.000594558235151495953832445628961522743,
				 0.000593378695194419483391334857458332408,
				 0.000591731636421818744941969470119147445,
				 0.000589611076719346455243808691193407867,
				 0.000586994350517598423994103384870868467,
				 0.000583874884854031586146894117206329611,
				 0.000580250113416369648483561505258876423,
				 0.000576093624314075549754099458965583835,
				 0.000571404283576446795495096253603151126,
				 0.000566178291543677084454722070461230032,
				 0.000560383705385456552285072806540711099,
				 0.000554036113183219245531541119476059976,
				 0.000547101782203354529421357455021279748,
				 0.000539590378607305719456388448662664814,
				 0.000531475880398059904834162647802031643,
				 0.000522761126009579674307758967444215159,
				 0.000513426193964879626178976490535887933,
				 0.000503471439996118442714023721862304228,
				 0.000492877649132951998513230140730456696,
				 0.000481644243580695637519523133462939768,
				 0.000469752901231638617628172394091734532,
				 0.000457203782194597388964518724918661974,
				 0.000443981334107897357768579560399757611,
				 0.000430084325644325209895418860028826202,
				 0.000415496277075476827707334326333921126,
				 0.000400217458394682584245372058973089224,
				 0.000384234045209675800346821317177159472,
				 0.000367545441481774578205976578004765543,
				 0.000350140253507962267553316193513524013,
				 0.000332015353188762482247731178119920514,
				 0.0003131588201289581393713112866805659  ,
				 0.000293571134673375165602404734954689047,
				 0.0002732396144953842549024658481471306  ,
				 0.000252166491978080952590657304313026543,
				 0.000230338086217967812898907431495842957,
				 0.000207755188901602319637845761590710936,
				 0.000184407428273676544071280059000628171,
				 0.000160296072750688053769330121411940127,
				 0.000135411374178293758812480218622908978,
				 0.000109757400994851350792963495806020546,
				 0.000083321255154674675512740944505196694,
				 0.000056110045291420844806862255893520341,
				 0.000028112214842117750512222665304484792,
				-0.000000664915059287533563596092871933463,
				-0.000030233023036961298722928234705698003,
				-0.000060582350127247511066292534609445397,
				-0.000091725757213663089493886626524243866,
				-0.000123651673924176947350767052924425116,
				-0.000156373607650496314986840462601946911,
				-0.000189878330666785985914729595336325474,
				-0.000224181291582564734283372631651332085,
				-0.000259262513756479916465086388299710052,
				-0.000295143949139012112207330895685686301,
				-0.000331795857758385116451083085564732755,
				-0.000369250947616408197425597048635381725,
				-0.000407472912838961894791550699679305581,
				-0.000446472471533747056627455807031878976,
				-0.000486266023397315344609787013396839939,
				-0.000526797172509366131050445591910147414,
				-0.000568117585656919589498503597724266001,
				-0.000610198722835726442732806606983331221,
				-0.000653025714948890674549364376844096114,
				-0.000696602216393902196230059065129580631,
				-0.000740938143692941781660865618874822758,
				-0.000786009198237797870011112078003634451,
				-0.00083180735337089715952796353803933016 ,
				-0.000878330961783022772827733692935225918,
				-0.000925581704890319806496024046538195762,
				-0.000973542509938788661744135666253896488,
				-0.001022200357980669431501308253018578398,
				-0.00107154545192869555744752396719832177 ,
				-0.001121574310237407993973146602684209938,
				-0.001172278866517003238084670968532918778,
				-0.001223647671638241783351186420247813658,
				-0.001275664961461078208623809437938234623,
				-0.001328318877295050397593922930639109836,
				-0.001381605483664879140126569012636537082,
				-0.001435514111991381593774752545300543716,
				-0.001490030310709726654380680166411821119,
				-0.001545140542632299522282646186965848756,
				-0.001600828131526096540990233840773271368,
				-0.001657077701275620111934228084749065601,
				-0.00171388219026813882345239292703809042 ,
				-0.001771222091817559662549341759074650327,
				-0.001829086234046156536972582706823686749,
				-0.001887456121011443516827243982447726012,
				-0.001946315907885101193289245635753559327,
				-0.002005653611847582618032959089759970084,
				-0.002065452532480743265408396069915397675,
				-0.002125701128615784061409721417135187949,
				-0.002186379609467173790876559635876219545,
				-0.002247470257467811503848675869221551693,
				-0.002308949892048013825818220112751077977,
				-0.002370800813067572634929014441240724409,
				-0.002433001582762172893686924979306240857,
				-0.002495539212413622892627884652938519139,
				-0.002558395593344146151659757038032694254,
				-0.00262155687824972005728341173380613327 ,
				-0.002685000874667115532135053257434265106,
				-0.002748710715566650333169240738584448991,
				-0.002812658429681911143732664370986640279,
				-0.002876825401032397783174232586134166922,
				-0.002941185262742721049505911778965128178,
				-0.003005719265339574976930725469514982251,
				-0.003070408886261874383677428212990889733,
				-0.003135235861268242593680177776604978135,
				-0.003200183249936601904278576924411936488,
				-0.003265230424980490077369044144006693386,
				-0.003330348709183248920306930074275442166,
				-0.00339551549746423776340864542078179511 ,
				-0.003460699126738315829082681673867227801,
				-0.003525879441696529604383103517761810508,
				-0.00359103738742727260357945340274454793 ,
				-0.003656160626684936028329975243877925095,
				-0.00372122709576601503819737182254812069 ,
				-0.003786217585097148390083088287383361603,
				-0.003851091277424251602817806272582856764,
				-0.003915820188760657689919231216890693759,
				-0.00398037390334530713498217835422110511 ,
				-0.004044753431870266001391112098417579546,
				-0.004108940228189469218156304464173445012,
				-0.004172921896538290230382894918648162275,
				-0.004236636670933028106511564203628950054,
				-0.004300057922164948059906564026277919766,
				-0.004363161155698277136882889948310548789,
				-0.004425990498298179934288931747232709313,
				-0.004488484864923985781515192172719252994,
				-0.004550577167817647893099941569516886375,
				-0.004612207527488891220524003244918276323,
				-0.004673580680298847732367928387020583614,
				-0.004734377685174024838477002674608229427,
				-0.004794761880740719753313250350856833393,
				-0.004854673000194286748565364320029402734,
				-0.004914039194159316482901633804658558802,
				-0.00497290333108323275024265086585728568 ,
				-0.005031185721134001989640616159249475459,
				-0.005088908520440194038769732287619262934,
				-0.005146011772251057186933209663948218804,
				-0.005202506149530423604221418543147592572,
				-0.00525834037486775512926229225740826223 ,
				-0.005313517667479322054147061749063141178,
				-0.005367991742499831492319017911540868226,
				-0.005421764756445895429293191369879423291,
				-0.005474793450192525987030300882452138467,
				-0.005527076207288428300046234653564170003,
				-0.005578572478941884807412954216943035135,
				-0.005629279149196747024375131474016598077,
				-0.00567915738608378191376591104244653252 ,
				-0.005728205593100271254825006650435170741,
				-0.005776387528452659250732814655293623218,
				-0.005823697846974160152733190898288739845,
				-0.005870104655126984032065262653077297728,
				-0.005915601248838126685614113853262097109,
				-0.005960155562872954809749970195298374165,
				-0.006003763318477052524091419627438881435,
				-0.006046392344427022752517686399187368806,
				-0.00608803855884441739998447218340515974 ,
				-0.006128672435086434701345670106320540071,
				-0.006168286884092091457154616307434480404,
				-0.006206855940451793535173052873687993269,
				-0.006244372428037200939421325074363267049,
				-0.006280812153023737978707607965134229744,
				-0.006316170743497839107361002675133931916,
				-0.006350421627588496986671628974363557063,
				-0.006383560946858747586762916625957586803,
				-0.006415563838758040447751707091583739384,
				-0.0064464280273664282747136944351495913  ,
				-0.006476130315832809639098321952133119339,
				-0.006504669401878437028086121785008799634,
				-0.006532020165576044555544310554751064046,
				-0.006558181891355941914301119766150804935,
				-0.006583132870364155966869113001393998275,
				-0.006606875410445036365947313328206291771,
				-0.006629386833218662601618920149348923587,
				-0.006650671710559465793499711594449763652,
				-0.006670702051663014719995459245183155872,
				-0.00668949146341617489203157376209674112 ,
				-0.006707008847020809808037178356698859716,
				-0.006723269979101119224462745904702387634,
				-0.006738249779792920314547277627070798189,
				-0.006751948952802270913220450410108242068,
				-0.006764360860424536818491514367224226589,
				-0.006775483971987654105428866557758738054,
				-0.006785303343369056619516221928734012181,
				-0.0067938284594909409755403295605447056  ,
				-0.006801043035563161462397907541799213504,
				-0.00680695265650354923436804455150195281 ,
				-0.00681154982524698800888662830743669474 ,
				-0.006814839381901261101959210719769544085,
				-0.006816807800262404334890042889583128272,
				 0.993182534307758935199217376066371798515,
				-0.006816807800262404334890042889583128272,
				-0.006814839381901261101959210719769544085,
				-0.00681154982524698800888662830743669474 ,
				-0.00680695265650354923436804455150195281 ,
				-0.006801043035563161462397907541799213504,
				-0.0067938284594909409755403295605447056  ,
				-0.006785303343369056619516221928734012181,
				-0.006775483971987654105428866557758738054,
				-0.006764360860424536818491514367224226589,
				-0.006751948952802270913220450410108242068,
				-0.006738249779792920314547277627070798189,
				-0.006723269979101119224462745904702387634,
				-0.006707008847020809808037178356698859716,
				-0.00668949146341617489203157376209674112 ,
				-0.006670702051663014719995459245183155872,
				-0.006650671710559465793499711594449763652,
				-0.006629386833218662601618920149348923587,
				-0.006606875410445036365947313328206291771,
				-0.006583132870364155966869113001393998275,
				-0.006558181891355941914301119766150804935,
				-0.006532020165576044555544310554751064046,
				-0.006504669401878437028086121785008799634,
				-0.006476130315832809639098321952133119339,
				-0.0064464280273664282747136944351495913  ,
				-0.006415563838758040447751707091583739384,
				-0.006383560946858747586762916625957586803,
				-0.006350421627588496986671628974363557063,
				-0.006316170743497839107361002675133931916,
				-0.006280812153023737978707607965134229744,
				-0.006244372428037200939421325074363267049,
				-0.006206855940451793535173052873687993269,
				-0.006168286884092091457154616307434480404,
				-0.006128672435086434701345670106320540071,
				-0.00608803855884441739998447218340515974 ,
				-0.006046392344427022752517686399187368806,
				-0.006003763318477052524091419627438881435,
				-0.005960155562872954809749970195298374165,
				-0.005915601248838126685614113853262097109,
				-0.005870104655126984032065262653077297728,
				-0.005823697846974160152733190898288739845,
				-0.005776387528452659250732814655293623218,
				-0.005728205593100271254825006650435170741,
				-0.00567915738608378191376591104244653252 ,
				-0.005629279149196747024375131474016598077,
				-0.005578572478941884807412954216943035135,
				-0.005527076207288428300046234653564170003,
				-0.005474793450192525987030300882452138467,
				-0.005421764756445895429293191369879423291,
				-0.005367991742499831492319017911540868226,
				-0.005313517667479322054147061749063141178,
				-0.00525834037486775512926229225740826223 ,
				-0.005202506149530423604221418543147592572,
				-0.005146011772251057186933209663948218804,
				-0.005088908520440194038769732287619262934,
				-0.005031185721134001989640616159249475459,
				-0.00497290333108323275024265086585728568 ,
				-0.004914039194159316482901633804658558802,
				-0.004854673000194286748565364320029402734,
				-0.004794761880740719753313250350856833393,
				-0.004734377685174024838477002674608229427,
				-0.004673580680298847732367928387020583614,
				-0.004612207527488891220524003244918276323,
				-0.004550577167817647893099941569516886375,
				-0.004488484864923985781515192172719252994,
				-0.004425990498298179934288931747232709313,
				-0.004363161155698277136882889948310548789,
				-0.004300057922164948059906564026277919766,
				-0.004236636670933028106511564203628950054,
				-0.004172921896538290230382894918648162275,
				-0.004108940228189469218156304464173445012,
				-0.004044753431870266001391112098417579546,
				-0.00398037390334530713498217835422110511 ,
				-0.003915820188760657689919231216890693759,
				-0.003851091277424251602817806272582856764,
				-0.003786217585097148390083088287383361603,
				-0.00372122709576601503819737182254812069 ,
				-0.003656160626684936028329975243877925095,
				-0.00359103738742727260357945340274454793 ,
				-0.003525879441696529604383103517761810508,
				-0.003460699126738315829082681673867227801,
				-0.00339551549746423776340864542078179511 ,
				-0.003330348709183248920306930074275442166,
				-0.003265230424980490077369044144006693386,
				-0.003200183249936601904278576924411936488,
				-0.003135235861268242593680177776604978135,
				-0.003070408886261874383677428212990889733,
				-0.003005719265339574976930725469514982251,
				-0.002941185262742721049505911778965128178,
				-0.002876825401032397783174232586134166922,
				-0.002812658429681911143732664370986640279,
				-0.002748710715566650333169240738584448991,
				-0.002685000874667115532135053257434265106,
				-0.00262155687824972005728341173380613327 ,
				-0.002558395593344146151659757038032694254,
				-0.002495539212413622892627884652938519139,
				-0.002433001582762172893686924979306240857,
				-0.002370800813067572634929014441240724409,
				-0.002308949892048013825818220112751077977,
				-0.002247470257467811503848675869221551693,
				-0.002186379609467173790876559635876219545,
				-0.002125701128615784061409721417135187949,
				-0.002065452532480743265408396069915397675,
				-0.002005653611847582618032959089759970084,
				-0.001946315907885101193289245635753559327,
				-0.001887456121011443516827243982447726012,
				-0.001829086234046156536972582706823686749,
				-0.001771222091817559662549341759074650327,
				-0.00171388219026813882345239292703809042 ,
				-0.001657077701275620111934228084749065601,
				-0.001600828131526096540990233840773271368,
				-0.001545140542632299522282646186965848756,
				-0.001490030310709726654380680166411821119,
				-0.001435514111991381593774752545300543716,
				-0.001381605483664879140126569012636537082,
				-0.001328318877295050397593922930639109836,
				-0.001275664961461078208623809437938234623,
				-0.001223647671638241783351186420247813658,
				-0.001172278866517003238084670968532918778,
				-0.001121574310237407993973146602684209938,
				-0.00107154545192869555744752396719832177 ,
				-0.001022200357980669431501308253018578398,
				-0.000973542509938788661744135666253896488,
				-0.000925581704890319806496024046538195762,
				-0.000878330961783022772827733692935225918,
				-0.00083180735337089715952796353803933016 ,
				-0.000786009198237797870011112078003634451,
				-0.000740938143692941781660865618874822758,
				-0.000696602216393902196230059065129580631,
				-0.000653025714948890674549364376844096114,
				-0.000610198722835726442732806606983331221,
				-0.000568117585656919589498503597724266001,
				-0.000526797172509366131050445591910147414,
				-0.000486266023397315344609787013396839939,
				-0.000446472471533747056627455807031878976,
				-0.000407472912838961894791550699679305581,
				-0.000369250947616408197425597048635381725,
				-0.000331795857758385116451083085564732755,
				-0.000295143949139012112207330895685686301,
				-0.000259262513756479916465086388299710052,
				-0.000224181291582564734283372631651332085,
				-0.000189878330666785985914729595336325474,
				-0.000156373607650496314986840462601946911,
				-0.000123651673924176947350767052924425116,
				-0.000091725757213663089493886626524243866,
				-0.000060582350127247511066292534609445397,
				-0.000030233023036961298722928234705698003,
				-0.000000664915059287533563596092871933463,
				 0.000028112214842117750512222665304484792,
				 0.000056110045291420844806862255893520341,
				 0.000083321255154674675512740944505196694,
				 0.000109757400994851350792963495806020546,
				 0.000135411374178293758812480218622908978,
				 0.000160296072750688053769330121411940127,
				 0.000184407428273676544071280059000628171,
				 0.000207755188901602319637845761590710936,
				 0.000230338086217967812898907431495842957,
				 0.000252166491978080952590657304313026543,
				 0.0002732396144953842549024658481471306  ,
				 0.000293571134673375165602404734954689047,
				 0.0003131588201289581393713112866805659  ,
				 0.000332015353188762482247731178119920514,
				 0.000350140253507962267553316193513524013,
				 0.000367545441481774578205976578004765543,
				 0.000384234045209675800346821317177159472,
				 0.000400217458394682584245372058973089224,
				 0.000415496277075476827707334326333921126,
				 0.000430084325644325209895418860028826202,
				 0.000443981334107897357768579560399757611,
				 0.000457203782194597388964518724918661974,
				 0.000469752901231638617628172394091734532,
				 0.000481644243580695637519523133462939768,
				 0.000492877649132951998513230140730456696,
				 0.000503471439996118442714023721862304228,
				 0.000513426193964879626178976490535887933,
				 0.000522761126009579674307758967444215159,
				 0.000531475880398059904834162647802031643,
				 0.000539590378607305719456388448662664814,
				 0.000547101782203354529421357455021279748,
				 0.000554036113183219245531541119476059976,
				 0.000560383705385456552285072806540711099,
				 0.000566178291543677084454722070461230032,
				 0.000571404283576446795495096253603151126,
				 0.000576093624314075549754099458965583835,
				 0.000580250113416369648483561505258876423,
				 0.000583874884854031586146894117206329611,
				 0.000586994350517598423994103384870868467,
				 0.000589611076719346455243808691193407867,
				 0.000591731636421818744941969470119147445,
				 0.000593378695194419483391334857458332408,
				 0.000594558235151495953832445628961522743,
				 0.00059527682395562036415936901789791591 ,
				 0.000595548662394163172070782330536076188,
				 0.000595392056026647765835935199874029422,
				 0.00059481168137116499639027722423634259 ,
				 0.000593818076304912338680974670523937675,
				 0.000592423993249702011965052150799238007,
				 0.000590646204122212523275614604045813394,
				 0.000588489857048687860924252035488279944,
				 0.000585968059126099711717006179867439641,
				 0.000583090381835795162727975604610719529,
				 0.000579872377582601517854998807166566621,
				 0.000576321494226988409112499844866306375,
				 0.000572454583499086631752372777981463514,
				 0.000568273688846419140416332815846089943,
				 0.000563795048777442444655483289039921146,
				 0.000559032201509470022884884521374715405,
				 0.000553997796314926300130510039565479019,
				 0.00054869564515861216601189109809411093 ,
				 0.000543146322006760008324621757935801725,
				 0.000537347936765063716353652001345153622,
				 0.000531326053397614388867919998915567703,
				 0.000525082019695964109795571772565381252,
				 0.00051863288030380553551845768112116275 ,
				 0.000511982973466100390984301338193063202,
				 0.000505145997579321804314689270398730514,
				 0.000498130798004316438336303018985518065,
				 0.000490951485022206204726635814239443789,
				 0.000483614777833969321143431363552167568,
				 0.000476133194680679729202804617571587187,
				 0.000468512758387105532169314425772199684,
				 0.000460765615114857782479845793588424385,
				 0.000452899761577707136127324272223404478,
				 0.000444927796624310588867456939254907411,
				 0.000436856185375711640779539113310647735,
				 0.000428696359739588273365940018777564546,
				 0.00042045554095127381840496516574035013 ,
				 0.0004121431843911914577952004812289033  ,
				 0.000403768242907358439978265929326539663,
				 0.000395340981010779818610040292625740221,
				 0.000386867725025322271165117982150150056,
				 0.000378360631585671189271863346093027758,
				 0.000369821380004550879106589578171337962,
				 0.000361263359766027367016988369741170573,
				 0.000352689109979818869039513984375844302,
				 0.00034411087436497030285498244239761334 ,
				 0.000335534520093316033020891531180041056,
				 0.000326969708158960433320300298376537285,
				 0.000318418379187888661747962704140491041,
				 0.000309892542395132748137692724199609984,
				 0.000301391735502388677121060611696634624,
				 0.000292927947423746669851352120161891435,
				 0.00028450335392873877084565781281355612 ,
				 0.000276128604086732238730855781838613439,
				 0.000267805138918506989084700187220278167,
				 0.00025954439574107972471886385257278107 ,
				 0.000251346462112940309541198047327270615,
				 0.000243219500211722090094942916316256287,
				 0.000235164425516434127299073009176311189,
				 0.000227190513797247882693888798577575017,
				 0.000219298746737803034942415614239052957,
				 0.000211497497852252856406773950936894835,
				 0.000203788064965256421768452499421186985,
				 0.000196179265884532293357303545100478459,
				 0.000188670229887645860521183660551969297,
				 0.000181267914343754909340875047796259878,
				 0.002178025562165529071395608795569387439,

#else
				 -0.000000087457440243163725235509735680961,
				 -0.000000725731783840276572536507216498736,
				 -0.000003455071455168441043080207811244442,
				 -0.00001214876358145688488288354428545901,
				 -0.000034753150927790905965267254096318084,
				 -0.000085025705839168979997821917748979104,
				 -0.000183321818398459368461977936348716867,
				 -0.000355232248094845750197717793028573396,
				 -0.000627139501560661574708355203711107606,
				 -0.001018688641836349492025837193409643078,
				 -0.001533580397709377899848059989551529725,
				 -0.002151461570726577888362784918285797175,
				 -0.002824299895989560056641654028908305918,
				 -0.003479939336125187181181228623927381705,
				 -0.004033495815018795296880149692242412129,
				 -0.004404484090205424903774478195828123717,
				  0.995464854040614466335057386459084227681,
				 -0.004404484090205424903774478195828123717,
				 -0.004033495815018795296880149692242412129,
				 -0.003479939336125187181181228623927381705,
				 -0.002824299895989560056641654028908305918,
				 -0.002151461570726577888362784918285797175,
				 -0.001533580397709377899848059989551529725,
				 -0.001018688641836349492025837193409643078,
				 -0.000627139501560661574708355203711107606,
				 -0.000355232248094845750197717793028573396,
				 -0.000183321818398459368461977936348716867,
				 -0.000085025705839168979997821917748979104,
				 -0.000034753150927790905965267254096318084,
				 -0.00001214876358145688488288354428545901,
				 -0.000003455071455168441043080207811244442,
				 -0.000000725731783840276572536507216498736,
				 -0.000000087457440243163725235509735680961,
#endif

};


void FirFilter::FirFilterInit(FirData *fir)
{
	for (uint16_t n = 0; n < FIR_FILTER_LENGTH; n++)
	{
		fir->buf[n] = 0.0f;
	}

	fir->bufIndex = 1;
	fir->out = 0.0f;
}

double FirFilter::FirFilterUpdate(FirData *fir, double input)
{
	fir->buf[fir->bufIndex - 1] = input;

	fir->bufIndex++;

	if (fir->bufIndex == FIR_FILTER_LENGTH)
	{
		fir->bufIndex = 1;
	}

	fir->out = 0.0f;

	uint16_t sumIndex = fir->bufIndex;

	for (uint16_t n = 0; n < FIR_FILTER_LENGTH; n++)
	{
		if (sumIndex > 1)
		{
			sumIndex--;
		}
		else
		{
			sumIndex = FIR_FILTER_LENGTH - 1;
		}

		fir->out += FIR_IMPULSE_RESPONSE[n]*fir->buf[sumIndex - 1];

	}

	return fir->out;
}

